(this["webpackJsonpcrud-ui"]=this["webpackJsonpcrud-ui"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},11:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),s=a.n(l),c=a(2),o=a(3),i=a(5),u=a(4),d=a(10),m=a.n(d),p=(a(16),a(1)),h=a.n(p),g=a(7),f=a(6),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getRecord=function(e){return n.state.tableData.find((function(t){return t._id===e}))},n.state={tableData:[],readOnlyFlag:!0,editFlag:!1,rowId:"",idS:"",nameS:"",ageS:"",phoneS:"",emailS:""},n}return Object(o.a)(a,[{key:"addNewCoctail",value:function(e){var t=this;e.preventDefault();var a=e.target,n=a.elements.age.value,r=a.elements.name.value,l={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{id:"",name:r,age:n,phone:"",email:""}})};fetch("http://178.128.196.163:3000/api/records",l).then(function(){var e=Object(f.a)(h.a.mark((function e(a){var l,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(l=e.sent,a.ok){e.next=8;break}return s=l&&l.message||a.status,e.abrupt("return",Promise.reject(s));case 8:c={data:{id:"",name:r,age:n,phone:"",email:""}},t.setState({tableData:[].concat(Object(g.a)(t.state.tableData),[c])}),console.log("New State, add method:"),console.log(t.state.tableData);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}},{key:"deletRowTable",value:function(e){var t=this,a=this.state.tableData.filter((function(t){return t!==e}));fetch("http://178.128.196.163:3000/api/records/"+e._id,{method:"DELETE"}).then(function(){var e=Object(f.a)(h.a.mark((function e(n){var r,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(r=e.sent,n.ok){e.next=8;break}return l=r&&r.message||n.status,e.abrupt("return",Promise.reject(l));case 8:t.setState({tableData:Object(g.a)(a)}),console.log("New State, delete method"),console.log(t.state.tableData);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}},{key:"getId",value:function(e){return this.setState({idS:e})}},{key:"getName",value:function(e){return this.setState({nameS:e})}},{key:"getAge",value:function(e){return this.setState({ageS:e})}},{key:"getPhone",value:function(e){return this.setState({phoneS:e})}},{key:"getEmail",value:function(e){return this.setState({emailS:e})}},{key:"updateTable",value:function(e,t){var a=this,n=this.state.editFlag,r=this.state.tableData,l=e.data.id,s=e.data.name,c=e.data.age,o=e.data.phone,i=e.data.email;if(this.state.idS!==l&&this.setState({idS:l}),this.state.nameS!==s&&this.setState({nameS:s}),this.state.ageS!==c&&this.setState({ageS:c}),this.state.phoneS!==o&&this.setState({phoneS:o}),this.state.emailS!==i&&this.setState({emailS:i}),n){t.target.innerText="\u270e",t.target.style=" background-color: #0d9bcb";var u={data:{id:this.state.idS,name:this.state.nameS,age:this.state.ageS,phone:this.state.phoneS,email:this.state.emailS}},d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};fetch("http://178.128.196.163:3000/api/records/"+e._id,d).then(function(){var t=Object(f.a)(h.a.mark((function t(n){var l,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(l=t.sent,n.ok){t.next=8;break}return s=l&&l.message||n.status,t.abrupt("return",Promise.reject(s));case 8:for(c=r.indexOf(a.getRecord(e._id)),o=[],i=0;i<r.length;i++)i===c?o.push({_id:r[i]._id,data:{id:u.data.id,name:u.data.name,age:u.data.age,phone:u.data.phone,email:u.data.email},__v:0}):o.push(r[i]);a.setState({readOnlyFlag:!0,editFlag:!1,tableData:[].concat(o)}),console.log("New State, update method"),console.log(a.state.tableData);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}else t.target.innerText="\u2714",t.target.style="background-color: #48b398",this.setState({readOnlyFlag:!1,editFlag:!0,rowId:e._id})}},{key:"componentDidMount",value:function(){var e=this;fetch("http://178.128.196.163:3000/api/records").then((function(e){return e.json()})).then((function(t){e.setState({tableData:t})}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.tableData,a=this.state.readOnlyFlag,n=this.state.rowId,l=this.state.editFlag;return r.a.createElement("div",null,r.a.createElement("form",{className:"addNewItemForm",onSubmit:function(t){e.addNewCoctail(t)}},r.a.createElement("input",{type:"text",id:"name",className:"test-iput",placeholder:"Name"}),r.a.createElement("input",{type:"text",id:"age",className:"test-iput",placeholder:"Age"}),r.a.createElement("button",{className:"btn",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"id"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Age"),r.a.createElement("th",{scope:"col"},"Phone"),r.a.createElement("th",{scope:"col"},"Email"),r.a.createElement("th",{scope:"col"},"Actions"))),r.a.createElement("tbody",null,t.map((function(t,s){return!l||a?r.a.createElement("tr",{key:s},r.a.createElement("th",{scope:"row"}," ",r.a.createElement("input",{className:"test-input",defaultValue:t.data.id,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",defaultValue:t.data.name,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",defaultValue:t.data.age,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",defaultValue:t.data.phone,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",defaultValue:t.data.email,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn-update",onClick:function(a){return e.updateTable(t,a)},type:"button"},"\u270e")," ",r.a.createElement("button",{className:"btn-delete",id:"delete",onClick:function(a){return e.deletRowTable(t)},type:"button"},"\xd7"))):t._id===n?r.a.createElement("tr",{key:s},r.a.createElement("th",{scope:"row"}," ",r.a.createElement("input",{className:"test-input",onChange:function(a){return e.getId(a.target.value,t)},defaultValue:t.data.id,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",onChange:function(a){return e.getName(a.target.value,t)},defaultValue:t.data.name,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",onChange:function(a){return e.getAge(a.target.value,t)},defaultValue:t.data.age,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",onChange:function(a){return e.getPhone(a.target.value,t)},defaultValue:t.data.phone,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null," ",r.a.createElement("input",{className:"test-input",onChange:function(a){return e.getEmail(a.target.value,t)},defaultValue:t.data.email,readOnly:e.state.readOnlyFlag})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn-update",onClick:function(a){return e.updateTable(t,a)},type:"button"},"\u270e")," ",r.a.createElement("button",{className:"btn-delete",id:"delete",onClick:function(a){return e.deletRowTable(t)},type:"button"},"\xd7"))):void 0})))))}}]),a}(n.Component),E=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),r.a.createElement("h2",null,"Welcome to React")),r.a.createElement("p",{className:"App-intro"},"To get started, edit ",r.a.createElement("code",null,"src/App.js")," and save to reload."),r.a.createElement("div",{className:"table-container"},r.a.createElement(b,null)))}}]),a}(n.Component);a(18);s.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("/crud-ui-react","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[11,1,2]]]);
//# sourceMappingURL=main.6c895483.chunk.js.map